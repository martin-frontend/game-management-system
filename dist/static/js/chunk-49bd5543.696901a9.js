(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49bd5543"],{"2bbd":function(t,e,a){"use strict";a("3066")},3066:function(t,e,a){},b0ed:function(t,e,a){"use strict";a("b9b4")},b9b4:function(t,e,a){},eeeab:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"table-container"},[a("p",[t._v("後台帳號")]),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:t.createUser}})],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tabledata,border:""}},[a("el-table-column",{attrs:{label:"功能",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.modifyUser(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteUser(e.row.id)}}},[t._v("刪除")])]}}])}),a("el-table-column",{attrs:{label:"帳號ID",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.account))]}}])}),a("el-table-column",{attrs:{label:"狀態",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.statusName(e.row.status)))]}}])}),a("el-table-column",{attrs:{label:"權限",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.role))]}}])}),a("el-table-column",{attrs:{prop:"create_at",label:"建立時間",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.create_at))]}}])})],1),a("Dialog",{ref:"dialog",on:{initData:t.initData}})],1)},n=[],r=a("2909"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title+"帳號",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.formData}},[a("el-form-item",{attrs:{label:"帳號ID","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入ID"},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("el-form-item",{attrs:{label:"密碼","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入密碼"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),"修改"!==t.title?a("el-form-item",{attrs:{label:"確認密碼","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"form-width",attrs:{autocomplete:"off",placeholder:"請輸入密碼"},model:{value:t.formData.c_password,callback:function(e){t.$set(t.formData,"c_password",e)},expression:"formData.c_password"}})],1):t._e(),a("el-form-item",{attrs:{label:"權限","label-width":t.formLabelWidth}},[a("el-select",{staticClass:"form-width",attrs:{placeholder:"請選擇權限"},model:{value:t.formData.role_id,callback:function(e){t.$set(t.formData,"role_id",e)},expression:"formData.role_id"}},t._l(t.roleSelectList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"狀態","label-width":t.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("啟用")]),a("el-radio",{attrs:{label:"0"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("停用")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),"新增"===t.title?a("el-button",{attrs:{type:"primary"},on:{click:t.createUser}},[t._v("建 立")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateUser}},[t._v("更 新")])],1)],1)],1)},i=[],l=a("fd85"),c={data:function(){return{formData:{},dialogFormVisible:!1,formLabelWidth:"80px",title:"",roleSelectList:[]}},mounted:function(){this.initRoleSelect()},methods:{handleClose:function(){this.loading=!1,this.dialogFormVisible=!1},handleOpen:function(t,e){this.dialogFormVisible=!0,this.title=t,"修改"===t&&(this.formData=Object.assign({},e))},initRoleSelect:function(){var t=this;Object(l["e"])().then((function(e){e.data.success?t.roleSelectList=Object(r["a"])(e.data.content):t.roleSelectList=[]})).catch((function(t){console.log(t)}))},createUser:function(){var t=this,e=new FormData;e.append("account",this.formData.account),e.append("password",this.formData.password),e.append("role_id",this.formData.role_id),e.append("status",this.formData.status),Object(l["b"])(e).then((function(e){e.data.success?(t.$emit("initData"),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg),t.dialogFormVisible=!1})).catch((function(t){console.log(t)}))},updateUser:function(){var t=this,e=new FormData;e.append("account",this.formData.account),e.append("password",this.formData.password),e.append("role_id",this.formData.role_id),e.append("status",this.formData.status),e.append("id",this.formData.id),Object(l["h"])(e).then((function(e){e.data.success?(t.$emit("initData"),t.$message.success(e.data.msg)):t.$message.warning(e.data.msg),t.dialogFormVisible=!1})).catch((function(t){console.log(t)}))}}},u=c,d=(a("b0ed"),a("2877")),f=Object(d["a"])(u,s,i,!1,null,"16fa8d99",null),m=f.exports,b={name:"ManageAccount",components:{Dialog:m},data:function(){return{tabledata:[]}},computed:{},mounted:function(){this.initData()},methods:{createUser:function(){this.$refs.dialog.handleOpen("新增")},statusName:function(t){switch(t){case"0":return"停用";case"1":return"啟用"}},initData:function(){var t=this;Object(l["f"])().then((function(e){e.data.success?t.tabledata=Object(r["a"])(e.data.content):(t.tabledata=[],t.$message.warning(e.data.msg))})).catch((function(t){console.log(t)}))},deleteUser:function(t){var e=this,a=new FormData;a.append("id",t),Object(l["d"])(a).then((function(t){t.data.success?(e.initData(),e.$message.success(t.data.msg)):e.$message.warning(t.data.msg)})).catch((function(t){console.log(t)}))},modifyUser:function(t){this.$refs.dialog.handleOpen("修改",t)}}},p=b,h=(a("2bbd"),Object(d["a"])(p,o,n,!1,null,"249f8aef",null));e["default"]=h.exports},fd85:function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"h",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"c",(function(){return d}));var o=a("b775");function n(){return Object(o["a"])({url:"authority_getuser",method:"get"})}function r(t){return Object(o["a"])({url:"authority_createuser",method:"post",data:t})}function s(t){return Object(o["a"])({url:"authority_updateuser",method:"post",data:t})}function i(t){return Object(o["a"])({url:"authority_deleteuser",method:"post",data:t})}function l(){return Object(o["a"])({url:"authority_getrole",method:"get"})}function c(t){return Object(o["a"])({url:"authority_createrole",method:"post",data:t})}function u(t){return Object(o["a"])({url:"authority_updaterole",method:"post",data:t})}function d(t){return Object(o["a"])({url:"authority_deleterole",method:"post",data:t})}}}]);